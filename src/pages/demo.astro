---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/sections/Header.astro";
import Footer from "../components/sections/Footer.astro";

// Sections
import HeroSection from "../components/sections/HeroSection.astro";
import SkillsSection from "../components/sections/SkillsSection.astro";
import WorkExperience from "../components/sections/WorkExperience.astro";
import Studies from "../components/sections/Studies.astro";
import ProjectsSection from "../components/sections/Projects.astro";

// UI components
import Badge from "../components/ui/badge/Badge.astro";
import Button from "../components/ui/button/Button.astro";
import Card from "../components/ui/card/Card.astro";
import FeaturedPost from "../components/ui/card/FeaturedPost.astro";
import PostCard from "../components/ui/card/PostCard.astro";
import Carousel from "../components/ui/carousel/Carousel.astro";
import PostMeta from "../components/ui/meta/PostMeta.astro";
import PostNav from "../components/ui/nav/PostNav.astro";
import BlogPagination from "../components/ui/nav/BlogPagination.astro";
import ArrowSeparator from "../components/ui/separator/ArrowSeparator.astro";
import GlowLineSeparator from "../components/ui/separator/GlowLineSeparator.astro";
import ShareButtons from "../components/ui/share/ShareButtons.astro";
import Timeline from "../components/ui/timeline/Timeline.astro";

// Data
import { logos } from "../data/logos";
import { skills } from "../data/skills";
import { work, workIcons } from "../data/work";
import { studies } from "../data/studies";

// Content
import { getCollection } from 'astro:content';
const pageTitle = "Demo de Componentes y Secciones";
const pageDescription = "Demostración de componentes y secciones con tematización clara/oscura.";
const posts = await getCollection('blog');
const [firstPost, secondPost, thirdPost] = posts.slice(0, 3);
---

<html lang="es" data-theme="dark" class="dark">
  <head>
    <BaseHead title={pageTitle} description={pageDescription} />
  </head>
  <body>
    <Header />
    <main class="mx-auto max-w-6xl px-4 py-10 space-y-10">
      <section class="space-y-4">
        <h1 class="text-4xl font-bold">{pageTitle}</h1>
        <p class="text-lg text-[color:var(--color-text-muted)]">{pageDescription}</p>
      </section>

      <!-- HeroSection -->
      <section class="card-surface p-6 space-y-4">
        <h2 class="text-2xl font-semibold">HeroSection</h2>
        <HeroSection
          title="¡Tu titular va aquí!"
          subtitle="Construyo software que te trae suscriptores leales."
          showCTA
          primaryCTA={{ text: 'Ver proyectos', href: '/portfolio' }}
          secondaryCTA={{ text: 'Leer blog', href: '/blog' }}
        />
      </section>

      <!-- Badges & Buttons -->
      <section class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card-surface p-6 space-y-4">
          <h2 class="text-2xl font-semibold">Badges</h2>
          <div class="flex flex-wrap gap-2">
            <Badge>Por defecto</Badge>
            <Badge variant="accent">Acento</Badge>
            <Badge variant="info">Info</Badge>
            <Badge variant="success">Éxito</Badge>
            <Badge variant="warning">Advertencia</Badge>
            <Badge variant="error">Error</Badge>
            <Badge variant="outline">Contorno</Badge>
          </div>
        </div>
        <div class="card-surface p-6 space-y-4">
          <h2 class="text-2xl font-semibold">Botones</h2>
          <div class="flex flex-wrap gap-3">
            <Button variant="primary">Principal</Button>
            <Button variant="secondary">Secundario</Button>
            <Button variant="ghost">Fantasma</Button>
            <Button variant="outline">Contorno</Button>
            <Button size="lg">Grande</Button>
            <Button size="sm">Pequeño</Button>
          </div>
        </div>
      </section>

      <!-- Separators -->
      <section class="card-surface p-6 space-y-4">
        <h2 class="text-2xl font-semibold">Separadores</h2>
        <ArrowSeparator />
        <GlowLineSeparator />
      </section>

      <!-- Card -->
      <section class="card-surface p-6 space-y-4">
        <h2 class="text-2xl font-semibold">Tarjeta</h2>
        <Card>
          <div class="p-4 space-y-2">
            <h3 class="text-xl font-semibold">Tarjeta de superficie</h3>
            <p class="text-[color:var(--color-text-secondary)]">Usa variables Starwind CSS mapeadas a nuestros tokens.</p>
          </div>
        </Card>
      </section>

      <!-- Carousel -->
      <section class="card-surface p-6 space-y-4">
        <h2 class="text-2xl font-semibold">Carrusel</h2>
        <Carousel tools={logos} />
      </section>

      <!-- Timeline -->
      <section class="card-surface p-6 space-y-4">
        <h2 class="text-2xl font-semibold">Línea de tiempo</h2>
        <Timeline items={work} icons={workIcons} centered={false} />
      </section>

      <!-- Post components using content collection -->
      {firstPost && (
        <section class="card-surface p-6 space-y-4">
          <h2 class="text-2xl font-semibold">Post Destacado</h2>
          <FeaturedPost post={firstPost} readingTimeMin={4} />
        </section>
      )}

      {(secondPost || thirdPost) && (
        <section class="card-surface p-6 space-y-6">
          <h2 class="text-2xl font-semibold">Tarjeta de Post</h2>
          <div class="blog-grid">
            {secondPost && <PostCard post={secondPost} />}
            {thirdPost && <PostCard post={thirdPost} />}
          </div>
        </section>
      )}

      {firstPost && (
        <section class="card-surface p-6 space-y-6">
          <h2 class="text-2xl font-semibold">Meta, Navegación y Compartir</h2>
          <!--<PostMeta pubDate={firstPost.data.pubDate} readingTimeMin={5} authorName={firstPost.data.author} />-->
          <PostNav prev={secondPost && { id: secondPost.id, title: secondPost.data.title }} next={thirdPost && { id: thirdPost.id, title: thirdPost.data.title }} />
          <ShareButtons title={firstPost.data.title} url={Astro.url.toString()} />
          <BlogPagination currentPage={2} totalPages={5} />
        </section>
      )}

      <!-- Sections: Skills, Work, Studies, Projects -->
      <section class="space-y-6">
        <SkillsSection title="Skills & Tools" skills={skills} />
        <WorkExperience title="Experiencia Laboral" items={work} />
        <Studies title="Estudios" items={studies} />
        <ProjectsSection title="Proyectos" />
      </section>
    </main>
    <Footer />
  </body>
</html>
